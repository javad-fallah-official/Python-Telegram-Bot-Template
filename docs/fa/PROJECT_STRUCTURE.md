# ๐๏ธ ุณุงุฎุชุงุฑ ฺฉุงูู ูพุฑูฺู

> **ุฑุงูููุง ุฌุงูุน ุณุงุฎุชุงุฑ ูพุฑูฺู ูุงูุจ ุฑุจุงุช ุชูฺฏุฑุงู ูพุงุชูู**

## ๐ ููุฑุณุช ูุทุงูุจ

- [๐ฏ ููุง ฺฉู](#-ููุง-ฺฉู)
- [๐ ุณุงุฎุชุงุฑ ฺฉุฏ](#-ุณุงุฎุชุงุฑ-ฺฉุฏ)
- [๐ ุณุงุฎุชุงุฑ ูุณุชูุฏุงุช](#-ุณุงุฎุชุงุฑ-ูุณุชูุฏุงุช)
- [๐ง ูุงูโูุง ูพฺฉุฑุจูุฏ](#-ูุงูโูุง-ูพฺฉุฑุจูุฏ)
- [๐งช ุณุงุฎุชุงุฑ ุชุณุชโูุง](#-ุณุงุฎุชุงุฑ-ุชุณุชโูุง)
- [๐ ูุซุงูโูุง](#-ูุซุงูโูุง)
- [๐๏ธ ุงุจุฒุงุฑูุง ู ุงุณฺฉุฑูพุชโูุง](#๏ธ-ุงุจุฒุงุฑูุง-ู-ุงุณฺฉุฑูพุชโูุง)

## ๐ฏ ููุง ฺฉู

ุงู ูพุฑูฺู ุจุง ุณุงุฎุชุงุฑ ูุฏููุงุฑ ู ููุธู ุทุฑุงุญ ุดุฏู ฺฉู ุงูฺฉุงู ุชูุณุนูุ ูฺฏูุฏุงุฑ ู ุชุณุช ุขุณุงู ุฑุง ูุฑุงูู ูโฺฉูุฏ.

```
Python-Telegram-Bot-Template/
โโโ ๐ bot/                    # ูุณุชู ุฑุจุงุช ู ููุฏูุฑูุง
โโโ ๐ core/                   # ุงุฌุฒุง ุงุตู ุณุณุชู
โโโ ๐ services/               # ุณุฑูุณโูุง ุฑุจุงุช
โโโ ๐ utils/                  # ุงุจุฒุงุฑูุง ฺฉูฺฉ
โโโ ๐ tests/                  # ุชุณุชโูุง ูพุฑูฺู
โโโ ๐ examples/               # ูุซุงูโูุง ฺฉุงุฑุจุฑุฏ
โโโ ๐ docs/                   # ูุณุชูุฏุงุช
โโโ ๐ scripts/                # ุงุณฺฉุฑูพุชโูุง ฺฉูฺฉ
โโโ ๐ main.py                 # ููุทู ูุฑูุฏ ุงุตู
โโโ ๐ pyproject.toml          # ุชูุธูุงุช ูพุฑูฺู
```

## ๐ ุณุงุฎุชุงุฑ ฺฉุฏ

### ๐ค ูพูุดู `bot/` - ูุณุชู ุฑุจุงุช

```
bot/
โโโ __init__.py              # ูุงฺูู ุงุตู ุฑุจุงุช
โโโ factory.py               # ฺฉุงุฑุฎุงูู ุณุงุฎุช ุฑุจุงุช (BotFactory)
โโโ handlers/                # ููุฏูุฑูุง ุฑุจุงุช
    โโโ __init__.py          # ูุงฺูู ููุฏูุฑูุง
    โโโ commands.py          # ููุฏูุฑูุง ุฏุณุชูุฑุงุช (/start, /help, ...)
    โโโ messages.py          # ููุฏูุฑูุง ูพุงูโูุง ูุชู
    โโโ errors.py            # ููุฏูุฑ ุฎุทุงูุง
    โโโ registry.py          # ุซุจุชโฺฉููุฏู ููุฏูุฑูุง
```

**ุชูุถุญุงุช:**
- `factory.py`: ุงูฺฏู Factory ุจุฑุง ุณุงุฎุช ู ูพฺฉุฑุจูุฏ ุฑุจุงุช
- `handlers/commands.py`: ุฏุณุชูุฑุงุช ุงุตู ุฑุจุงุช ูุงููุฏ `/start`, `/help`
- `handlers/messages.py`: ูพุฑุฏุงุฒุด ูพุงูโูุง ูุชูุ ุนฺฉุณุ ูุงู
- `handlers/errors.py`: ูุฏุฑุช ุฎุทุงูุง ู ุงุณุชุซูุงูุง
- `handlers/registry.py`: ุซุจุช ุฎูุฏฺฉุงุฑ ุชูุงู ููุฏูุฑูุง

### โ๏ธ ูพูุดู `core/` - ุงุฌุฒุง ุงุตู

```
core/
โโโ __init__.py              # ูุงฺูู ุงุตู core
โโโ config.py                # ูุฏุฑุช ุชูุธูุงุช (Config class)
โโโ database.py              # ูุงู ุงูุชุฒุงุน ูพุงฺฏุงู ุฏุงุฏู
โโโ db_factory.py            # ฺฉุงุฑุฎุงูู ุณุงุฎุช ูพุงฺฏุงู ุฏุงุฏู
โโโ postgres.py              # ูพุงุฏูโุณุงุฒ PostgreSQL
โโโ logger.py                # ุณุณุชู ูุงฺฏโฺฏุฑ
โโโ middleware.py            # ูุฏูโูุฑูุง ุฑุจุงุช
โโโ runner.py                # ุงุฌุฑุงฺฉููุฏู ุฑุจุงุช (BotRunner)
```

**ุชูุถุญุงุช:**
- `config.py`: ูุฏุฑุช ูุชุบุฑูุง ูุญุท ู ุชูุธูุงุช
- `database.py`: ฺฉูุงุณ ูพุงู ุจุฑุง ุนููุงุช ูพุงฺฏุงู ุฏุงุฏู
- `db_factory.py`: ุงูุชุฎุงุจ ุฎูุฏฺฉุงุฑ ููุน ูพุงฺฏุงู ุฏุงุฏู
- `postgres.py`: ูพุงุฏูโุณุงุฒ ุงุฎุชุตุงุต PostgreSQL
- `logger.py`: ุชูุธูุงุช ูุงฺฏโฺฏุฑ ุจุง ูุฑูุชโูุง ูุฎุชูู
- `middleware.py`: ูุฏูโูุฑูุง ุงุญุฑุงุฒ ููุช ู ูุงฺฏโฺฏุฑ
- `runner.py`: ูุฏุฑุช ฺุฑุฎู ุญุงุช ุฑุจุงุช

### ๐ง ูพูุดู `services/` - ุณุฑูุณโูุง

```
services/
โโโ __init__.py              # ูุงฺูู ุณุฑูุณโูุง
โโโ base.py                  # ฺฉูุงุณ ูพุงู ุณุฑูุณโูุง
โโโ polling.py               # ุณุฑูุณ Polling
โโโ webhook.py               # ุณุฑูุณ Webhook
```

**ุชูุถุญุงุช:**
- `base.py`: ฺฉูุงุณ ูพุงู ุจุฑุง ุชูุงู ุณุฑูุณโูุง
- `polling.py`: ุงุฌุฑุง ุฑุจุงุช ุฏุฑ ุญุงูุช Polling
- `webhook.py`: ุงุฌุฑุง ุฑุจุงุช ุฏุฑ ุญุงูุช Webhook

### ๐๏ธ ูพูุดู `utils/` - ุงุจุฒุงุฑูุง ฺฉูฺฉ

```
utils/
โโโ __init__.py              # ูุงฺูู ุงุจุฒุงุฑูุง
โโโ cache.py                 # ุณุณุชู ฺฉุด
โโโ files.py                 # ุนููุงุช ูุงู
โโโ formatters.py            # ูุฑูุชโฺฉููุฏูโูุง ูุชู
โโโ keyboards.py             # ฺฉุจูุฑุฏูุง ุดุฎุตโุณุงุฒ ุดุฏู
โโโ logging_utils.py         # ุงุจุฒุงุฑูุง ูุงฺฏโฺฏุฑ
โโโ text.py                  # ูพุฑุฏุงุฒุด ูุชู
โโโ validators.py            # ุงุนุชุจุงุฑุณูุฌ ุฏุงุฏูโูุง
```

**ุชูุถุญุงุช:**
- `cache.py`: ฺฉุด ุญุงูุธู ู Redis
- `files.py`: ุขูพููุฏุ ุฏุงูููุฏ ู ูพุฑุฏุงุฒุด ูุงูโูุง
- `formatters.py`: ูุฑูุชโุจูุฏ ูพุงูโูุง ู ุฏุงุฏูโูุง
- `keyboards.py`: ฺฉุจูุฑุฏูุง Reply ู Inline
- `logging_utils.py`: ุงุจุฒุงุฑูุง ฺฉูฺฉ ูุงฺฏโฺฏุฑ
- `text.py`: ูพุฑุฏุงุฒุด ู ุชุญูู ูุชู
- `validators.py`: ุงุนุชุจุงุฑุณูุฌ ูุฑูุฏโูุง

## ๐ ุณุงุฎุชุงุฑ ูุณุชูุฏุงุช

### ๐ ูุณุชูุฏุงุช ุงูฺฏูุณ `docs/`

```
docs/
โโโ README.md                # ุฑุงูููุง ุงุตู ูุณุชูุฏุงุช
โโโ DOCUMENTATION_REFACTOR_SUMMARY.md  # ุฎูุงุตู ุจุงุฒุณุงุฒ ูุณุชูุฏุงุช
โโโ POSTGRESQL.md            # ุฑุงูููุง PostgreSQL
โโโ setup/                   # ุฑุงูโุงูุฏุงุฒ
โ   โโโ INSTALLATION.md      # ุฑุงูููุง ูุตุจ
โ   โโโ CONFIGURATION.md     # ุฑุงูููุง ุชูุธูุงุช
โโโ features/                # ูฺฺฏโูุง
โ   โโโ DATABASE.md          # ุฑุงูููุง ูพุงฺฏุงู ุฏุงุฏู
โ   โโโ HANDLERS.md          # ุฑุงูููุง ููุฏูุฑูุง
โโโ migration/               # ููุงุฌุฑุช
โ   โโโ AIOGRAM_MIGRATION.md # ููุงุฌุฑุช aiogram
โ   โโโ DATABASE_MIGRATION.md# ููุงุฌุฑุช ูพุงฺฏุงู ุฏุงุฏู
โ   โโโ TEST_MIGRATION.md    # ููุงุฌุฑุช ุชุณุชโูุง
โโโ development/             # ุชูุณุนู
โ   โโโ TESTING.md          # ุฑุงูููุง ุชุณุชโููุณ
โ   โโโ CONTRIBUTING.md     # ุฑุงูููุง ูุดุงุฑฺฉุช
โโโ advanced/                # ููุถูุนุงุช ูพุดุฑูุชู
โ   โโโ POSTGRESQL.md        # PostgreSQL ูพุดุฑูุชู
โโโ api/                     # ูุฑุฌุน API
    โโโ HANDLERS.md         # API ููุฏูุฑูุง
    โโโ DATABASE.md         # API ูพุงฺฏุงู ุฏุงุฏู
    โโโ UTILITIES.md        # API ุงุจุฒุงุฑูุง
    โโโ MIDDLEWARE.md       # API ูุฏูโูุฑ
```

### ๐ฎ๐ท ูุณุชูุฏุงุช ูุงุฑุณ `docs/fa/`

```
docs/fa/
โโโ README.md                # ุฑุงูููุง ุงุตู ูุงุฑุณ
โโโ PROJECT_STRUCTURE.md     # ุงู ุณูุฏ - ุณุงุฎุชุงุฑ ูพุฑูฺู
โโโ setup/                   # ุฑุงูโุงูุฏุงุฒ
โ   โโโ INSTALLATION.md      # ุฑุงูููุง ูุตุจ
โ   โโโ CONFIGURATION.md     # ุฑุงูููุง ุชูุธูุงุช
โโโ features/                # ูฺฺฏโูุง
โ   โโโ DATABASE.md          # ุฑุงูููุง ูพุงฺฏุงู ุฏุงุฏู
โ   โโโ HANDLERS.md          # ุฑุงูููุง ููุฏูุฑูุง
โโโ migration/               # ููุงุฌุฑุช
โ   โโโ MIGRATION.md         # ุฑุงูููุง ููุงุฌุฑุช
โโโ development/             # ุชูุณุนู
โ   โโโ TESTING.md          # ุฑุงูููุง ุชุณุชโููุณ
โโโ advanced/                # ููุถูุนุงุช ูพุดุฑูุชู
โ   โโโ DEPLOYMENT.md        # ุฑุงูููุง ุงุณุชูุฑุงุฑ
โ   โโโ OPTIMIZATION.md      # ุฑุงูููุง ุจูููโุณุงุฒ
โ   โโโ MONITORING.md        # ุฑุงูููุง ูุธุงุฑุช
โโโ api/                     # ูุฑุฌุน API (ุฏุฑ ุญุงู ุชูุณุนู)
    โโโ HANDLERS.md         # API ููุฏูุฑูุง
    โโโ DATABASE.md         # API ูพุงฺฏุงู ุฏุงุฏู
    โโโ UTILITIES.md        # API ุงุจุฒุงุฑูุง
    โโโ MIDDLEWARE.md       # API ูุฏูโูุฑ
```

## ๐ง ูุงูโูุง ูพฺฉุฑุจูุฏ

### ๐ ูุงูโูุง ุงุตู

```
โโโ .env.example             # ููููู ูุชุบุฑูุง ูุญุท
โโโ .gitignore              # ูุงูโูุง ูุงุฏุฏู ฺฏุฑูุชู ุดุฏู Git
โโโ .python-version         # ูุณุฎู Python ููุฑุฏ ุงุณุชูุงุฏู
โโโ pyproject.toml          # ุชูุธูุงุช ูพุฑูฺู ู ูุงุจุณุชฺฏโูุง
โโโ uv.lock                 # ููู ูุงุจุณุชฺฏโูุง (uv)
โโโ conftest.py             # ุชูุธูุงุช pytest
โโโ main.py                 # ููุทู ูุฑูุฏ ุงุตู
โโโ run_tests.py            # ุงุฌุฑุงฺฉููุฏู ุชุณุชโูุง
โโโ README.md               # ุฑุงูููุง ุงุตู ูพุฑูฺู
โโโ QUICKSTART.md           # ุฑุงูููุง ุดุฑูุน ุณุฑุน
โโโ AIOGRAM_VERIFICATION_SUMMARY.md  # ุฎูุงุตู ุชุฃุฏ aiogram
```

### โ๏ธ ุชูุถุญ ูุงูโูุง ูพฺฉุฑุจูุฏ

| ูุงู | ูุฏู | ูุญุชูุง |
|------|------|-------|
| `.env.example` | ููููู ุชูุธูุงุช | ูุชุบุฑูุง ูุญุท ููุฑุฏ ูุงุฒ |
| `pyproject.toml` | ุชูุธูุงุช ูพุฑูฺู | ูุงุจุณุชฺฏโูุงุ ุงุจุฒุงุฑูุงุ ูุชุงุฏุชุง |
| `conftest.py` | ุชูุธูุงุช ุชุณุช | Fixtures ู ุชูุธูุงุช pytest |
| `main.py` | ููุทู ูุฑูุฏ | ุงุฌุฑุง ุงุตู ุฑุจุงุช |
| `run_tests.py` | ุงุฌุฑุง ุชุณุช | ุงุณฺฉุฑูพุช ุงุฌุฑุง ุชุณุชโูุง |

## ๐งช ุณุงุฎุชุงุฑ ุชุณุชโูุง

```
tests/
โโโ README.md                # ุฑุงูููุง ุชุณุชโูุง
โโโ __init__.py              # ูุงฺูู ุชุณุชโูุง
โโโ conftest.py              # ุชูุธูุงุช ูุดุชุฑฺฉ ุชุณุชโูุง
โโโ utils.py                 # ุงุจุฒุงุฑูุง ฺฉูฺฉ ุชุณุช
โโโ test_bot.py              # ุชุณุชโูุง ุฑุจุงุช ุงุตู
โโโ test_core.py             # ุชุณุชโูุง ุงุฌุฒุง core
โโโ test_integration.py      # ุชุณุชโูุง ฺฉูพุงุฑฺฺฏ
โโโ test_postgres.py         # ุชุณุชโูุง PostgreSQL
โโโ test_services.py         # ุชุณุชโูุง ุณุฑูุณโูุง
โโโ test_setup.py            # ุชุณุชโูุง ุฑุงูโุงูุฏุงุฒ
โโโ test_utils.py            # ุชุณุชโูุง ุงุจุฒุงุฑูุง
```

### ๐ฏ ุงููุงุน ุชุณุชโูุง

| ููุน ุชุณุช | ูุงู | ุชูุถุญ |
|---------|------|-------|
| **Unit Tests** | `test_*.py` | ุชุณุช ุงุฌุฒุง ูุฌุฒุง |
| **Integration Tests** | `test_integration.py` | ุชุณุช ุชุนุงูู ุงุฌุฒุง |
| **Database Tests** | `test_postgres.py` | ุชุณุช ุนููุงุช ูพุงฺฏุงู ุฏุงุฏู |
| **Service Tests** | `test_services.py` | ุชุณุช ุณุฑูุณโูุง |
| **Setup Tests** | `test_setup.py` | ุชุณุช ุฑุงูโุงูุฏุงุฒ |

## ๐ ูุซุงูโูุง

```
examples/
โโโ example_bot.py           # ูุซุงู ุฑุจุงุช ฺฉุงูู
โโโ database_switching_demo.py  # ููุงุด ุชุบุฑ ูพุงฺฏุงู ุฏุงุฏู
โโโ logging_demo.py          # ููุงุด ุณุณุชู ูุงฺฏโฺฏุฑ
โโโ logging_toggle_demo.py   # ุชุบุฑ ุณุทุญ ูุงฺฏ
โโโ postgresql_example.py    # ูุซุงู PostgreSQL
```

### ๐ ุชูุถุญ ูุซุงูโูุง

| ูุซุงู | ูุฏู | ฺฉุงุฑุจุฑุฏ |
|------|------|--------|
| `example_bot.py` | ุฑุจุงุช ฺฉุงูู | ููุงุด ุชูุงู ูฺฺฏโูุง |
| `database_switching_demo.py` | ุชุบุฑ ุฏุชุงุจุณ | ูุญูู ุชุบุฑ ููุน ูพุงฺฏุงู ุฏุงุฏู |
| `logging_demo.py` | ูุงฺฏโฺฏุฑ | ููุงุด ุณุณุชู ูุงฺฏ |
| `logging_toggle_demo.py` | ฺฉูุชุฑู ูุงฺฏ | ุชุบุฑ ุณุทุญ ูุงฺฏ ุฏุฑ ุฒูุงู ุงุฌุฑุง |
| `postgresql_example.py` | PostgreSQL | ุงุณุชูุงุฏู ุงุฒ PostgreSQL |

## ๐๏ธ ุงุจุฒุงุฑูุง ู ุงุณฺฉุฑูพุชโูุง

```
scripts/
โโโ analyze_logs.py          # ุชุญูู ูุงูโูุง ูุงฺฏ
```

### ๐ง ุงุจุฒุงุฑูุง ฺฉูฺฉ

| ุงุณฺฉุฑูพุช | ูุฏู | ุงุณุชูุงุฏู |
|---------|------|---------|
| `analyze_logs.py` | ุชุญูู ูุงฺฏโูุง | ุจุฑุฑุณ ู ุชุญูู ูุงูโูุง ูุงฺฏ |
| `run_tests.py` | ุงุฌุฑุง ุชุณุช | ุงุฌุฑุง ุฎูุฏฺฉุงุฑ ุชุณุชโูุง |

## ๐ฏ ูฺฉุงุช ููู ุณุงุฎุชุงุฑ

### โ ูุฒุงุง ุงู ุณุงุฎุชุงุฑ

1. **ูุฏููุงุฑ ุจูุฏู**: ูุฑ ุจุฎุด ูุณุฆููุช ูุดุฎุต ุฏุงุฑุฏ
2. **ูุงุจูุช ุชูุณุนู**: ุขุณุงู ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ูฺฺฏโูุง ุฌุฏุฏ
3. **ุชุณุชโูพุฐุฑ**: ุณุงุฎุชุงุฑ ููุงุณุจ ุจุฑุง ุชุณุชโููุณ
4. **ูฺฏูุฏุงุฑ ุขุณุงู**: ฺฉุฏ ููุธู ู ูุงุจู ููู
5. **ูุณุชูุฏุณุงุฒ ฺฉุงูู**: ูุณุชูุฏุงุช ุฌุงูุน ุจู ุฏู ุฒุจุงู

### ๐ ุงูฺฏููุง ุทุฑุงุญ ุงุณุชูุงุฏู ุดุฏู

1. **Factory Pattern**: ุฏุฑ `BotFactory` ู `DatabaseFactory`
2. **Strategy Pattern**: ุฏุฑ ุงูุชุฎุงุจ ููุน ูพุงฺฏุงู ุฏุงุฏู
3. **Observer Pattern**: ุฏุฑ ุณุณุชู ูุงฺฏโฺฏุฑ
4. **Singleton Pattern**: ุฏุฑ ูุฏุฑุช ุชูุธูุงุช
5. **Dependency Injection**: ุฏุฑ ุชุฒุฑู ูุงุจุณุชฺฏโูุง

### ๐ ุขูุงุฑ ูพุฑูฺู

| ุจุฎุด | ุชุนุฏุงุฏ ูุงู | ุฎุทูุท ฺฉุฏ (ุชูุฑุจ) |
|-----|-----------|------------------|
| **Core** | 7 | 1,500+ |
| **Bot** | 5 | 800+ |
| **Utils** | 7 | 600+ |
| **Services** | 3 | 300+ |
| **Tests** | 8 | 1,200+ |
| **Examples** | 5 | 400+ |
| **Docs** | 20+ | 5,000+ |
| **ุฌูุน ฺฉู** | 55+ | 9,800+ |

## ๐ ูุญูู ุงุณุชูุงุฏู ุงุฒ ุณุงุฎุชุงุฑ

### 1๏ธโฃ ุงุถุงูู ฺฉุฑุฏู ููุฏูุฑ ุฌุฏุฏ
```python
# ุฏุฑ bot/handlers/commands.py
@router.message(Command("new_command"))
async def new_command_handler(message: Message):
    await message.answer("ูพุงุณุฎ ุฏุณุชูุฑ ุฌุฏุฏ")
```

### 2๏ธโฃ ุงุถุงูู ฺฉุฑุฏู ุงุจุฒุงุฑ ุฌุฏุฏ
```python
# ุฏุฑ utils/new_utility.py
def new_utility_function():
    """ุงุจุฒุงุฑ ุฌุฏุฏ"""
    pass
```

### 3๏ธโฃ ุงุถุงูู ฺฉุฑุฏู ุชุณุช ุฌุฏุฏ
```python
# ุฏุฑ tests/test_new_feature.py
def test_new_feature():
    """ุชุณุช ูฺฺฏ ุฌุฏุฏ"""
    assert True
```

### 4๏ธโฃ ุงุถุงูู ฺฉุฑุฏู ูุณุชูุฏ ุฌุฏุฏ
```markdown
<!-- ุฏุฑ docs/fa/new_guide.md -->
# ุฑุงูููุง ุฌุฏุฏ
ูุญุชูุง ุฑุงูููุง...
```

## ๐ ุฌุณุชุฌู ุฏุฑ ุณุงุฎุชุงุฑ

ุจุฑุง ูพุฏุง ฺฉุฑุฏู ูุงู ุง ฺฉุฏ ููุฑุฏ ูุธุฑ:

1. **ููุฏูุฑูุง**: `bot/handlers/`
2. **ุชูุธูุงุช**: `core/config.py`
3. **ูพุงฺฏุงู ุฏุงุฏู**: `core/database.py`, `core/postgres.py`
4. **ุงุจุฒุงุฑูุง**: `utils/`
5. **ุชุณุชโูุง**: `tests/`
6. **ูุซุงูโูุง**: `examples/`
7. **ูุณุชูุฏุงุช**: `docs/` ุง `docs/fa/`

---

**ูฺฉุชู**: ุงู ุณุงุฎุชุงุฑ ุจูโุทูุฑ ูุฏุงูู ุจูุจูุฏ ูโุงุจุฏ. ุจุฑุง ุขุฎุฑู ุชุบุฑุงุชุ ูุฎุฒู ูพุฑูฺู ุฑุง ุจุฑุฑุณ ฺฉูุฏ.